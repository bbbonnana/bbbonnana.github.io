<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript正则表达式</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.47ef6698.js" as="script"><link rel="preload" href="/assets/js/2.6d8ae55b.js" as="script"><link rel="preload" href="/assets/js/17.65bdf248.js" as="script"><link rel="prefetch" href="/assets/js/10.f387a10f.js"><link rel="prefetch" href="/assets/js/11.c1b4cb0b.js"><link rel="prefetch" href="/assets/js/12.5c9e598e.js"><link rel="prefetch" href="/assets/js/13.537bc5a1.js"><link rel="prefetch" href="/assets/js/14.9ede1c62.js"><link rel="prefetch" href="/assets/js/15.a28880a7.js"><link rel="prefetch" href="/assets/js/16.5466c073.js"><link rel="prefetch" href="/assets/js/3.924945c2.js"><link rel="prefetch" href="/assets/js/4.5fa47ea8.js"><link rel="prefetch" href="/assets/js/5.26e38a66.js"><link rel="prefetch" href="/assets/js/6.adbc6dbc.js"><link rel="prefetch" href="/assets/js/7.d1d73f47.js"><link rel="prefetch" href="/assets/js/8.2b10522a.js"><link rel="prefetch" href="/assets/js/9.87a41797.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">前端小记</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>端外基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basis/protocol/" class="sidebar-link">互联网协议</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>核心前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>HTML &amp; CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/core/js/js-core/" class="sidebar-link">JavaScript核心</a></li><li><a href="/core/js/es6/" class="sidebar-link">ES6特性</a></li><li><a href="/core/js/regex/" aria-current="page" class="active sidebar-link">JavaScript正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/core/js/regex/#使用方法" class="sidebar-link">使用方法</a></li><li class="sidebar-sub-header"><a href="/core/js/regex/#regexp属性与方法" class="sidebar-link">RegExp属性与方法</a></li><li class="sidebar-sub-header"><a href="/core/js/regex/#regexp语法" class="sidebar-link">RegExp语法</a></li></ul></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端工程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/development/build/webpack/" class="sidebar-link">Webpack原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/framework/vue/source/" class="sidebar-link">VUE2 源码分析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Node.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-js/server/http/" class="sidebar-link">Node.js中搭建HTTP服务器</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript正则表达式"><a href="#javascript正则表达式" class="header-anchor">#</a> JavaScript正则表达式</h1> <h2 id="使用方法"><a href="#使用方法" class="header-anchor">#</a> 使用方法</h2> <p>Javascript创建正则表达式方法有以下两种：</p> <ul><li><p><strong>字面量</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> expression <span class="token operator">=</span> <span class="token operator">/</span> pattern <span class="token operator">/</span> flags
</code></pre></div><p>其中pattern部分可以是任何简单或复杂的正则表达式。flags支持以下三个标志：</p> <p><strong>g</strong>：表示全局模式，即模式将被用于所有字符串，而非在发现第一个匹配项时立即停止</p> <p><strong>i</strong> ：表示不区分大小写</p> <p><strong>m</strong>：多行模式，即在到达一行文本末尾时还会继续查找下一行中是否存在模式匹配项</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;abcuuuabuab&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ab</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'**'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//	**cuuuabuab</span>
<span class="token string">&quot;abcuuuabuab&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ab</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'**'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//	**cuuu**u**</span>
</code></pre></div></li> <li><p><strong>构造函数</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> pattern1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pattern2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\d{3}'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// pattern1 与 pattern2等价</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">,</span> re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ppcatacatb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  连续输出四次  0  true</span>

re <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'cat'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">,</span> re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ppcatacatb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//	输出分别为：0 true, 5 true, 9 false, 0 true</span>
<span class="token comment">//	( lastIndex属性详见下文 **RegExp属性与方法** )</span>
</code></pre></div></li></ul> <h2 id="regexp属性与方法"><a href="#regexp属性与方法" class="header-anchor">#</a> RegExp属性与方法</h2> <h3 id="regexp属性"><a href="#regexp属性" class="header-anchor">#</a> RegExp属性</h3> <ul><li>**global：**布尔值，表示是否设置了 <strong>g</strong> 标志</li> <li>**ignoreCase：**布尔值，表示是否设置了 <strong>i</strong> 标志</li> <li>**lastIndex：**整数，表示开始搜索下一个匹配项的字符位置，从0算起</li> <li><strong>multiline：<strong>布尔值，表示是否设置了</strong>m</strong>标志</li> <li>**source：**正则表达式的字符串表示（与字面量模式中的pattern相同）</li></ul> <h3 id="regexp自带方法"><a href="#regexp自带方法" class="header-anchor">#</a> RegExp自带方法</h3> <ul><li><p><strong>exec()</strong></p> <p>该方法接收一个待匹配的字符串，然后返回一个包含第一个匹配项信息的数组，若无匹配项将返回<strong>null</strong>，返回的数组有额外两个属性：<strong>index</strong>和<strong>input</strong>，前者为匹配项在字符串中的位置，后者为应用的正则表达式字符串。在数组中，第一项是整个模式匹配的字符串，其他项是模式中的捕获组匹配的字符串。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'abb1286f777'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
    0: &quot;128&quot;
    groups: undefined
    index: 3
    input: &quot;abb1286f777&quot;
    length: 1
*/</span>
</code></pre></div><p>更多例子见下文 <strong>捕获组</strong>。</p></li> <li><p><strong>test()</strong></p> <p>接受一个字符串参数并返回是否匹配，即true或false。</p></li></ul> <h3 id="字符串的正则方法"><a href="#字符串的正则方法" class="header-anchor">#</a> 字符串的正则方法</h3> <ul><li><p><strong>search()</strong></p> <p>检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;What the Fuck about Huck and Fuck!&quot;</span><span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[F]uck</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 9</span>
</code></pre></div></li> <li><p><strong>replace()</strong></p> <p>用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。</p></li> <li><p><strong>match()</strong></p> <p>接收一个正则表达式实例并返回匹配项的数组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'aaaaabbbbb'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;]</span>
</code></pre></div></li></ul> <h2 id="regexp语法"><a href="#regexp语法" class="header-anchor">#</a> RegExp语法</h2> <h3 id="方括号"><a href="#方括号" class="header-anchor">#</a> 方括号</h3> <div class="language- extra-class"><pre class="language-text"><code>[abc]				查找方括号之间的任何字符
[^abc]				查找任何不在方括号之间的字符
[0-9]				查找任何从 0 至 9 的数字
[a-z]				查找任何从小写 a 到小写 z 的字符
[A-Z]				查找任何从大写 A 到大写 Z 的字符
[A-z]				查找任何从大写 A 到小写 z 的字符
[adgk]				查找给定集合内的任何字符
[^adgk]				查找给定集合外的任何字符
(red|blue|green)	查找任何指定的选项
</code></pre></div><h3 id="元字符"><a href="#元字符" class="header-anchor">#</a> 元字符</h3> <div class="language- extra-class"><pre class="language-text"><code>.		查找任意单个字符，除了换行和行结束符
\w		查找单词字符。即 a-zA-Z0-9
\W		查找非单词字符
\d		查找数字
\D		查找非数字字符
\s		查找空白字符。即空格符、制表符、回车符、换行符、垂直换行符、换页符
\S		查找非空白字符
\b		匹配单词边界
\B		匹配非单词边界
\0		查找 NULL 字符
\n		查找换行符
\f		查找换页符
\r		查找回车符
\t		查找制表符
\v		查找垂直制表符
\xxx	查找以八进制数 xxx 规定的字符
\xdd	查找以十六进制数 dd 规定的字符
\uxxxx	查找以十六进制数 xxxx 规定的 Unicode 字符
</code></pre></div><p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">uck\b..</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'fuckA huck tool'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// [&quot;uck t&quot;, index: 7, input: &quot;fuckA huck tool&quot;, groups: undefined]</span>
</code></pre></div><h3 id="量词"><a href="#量词" class="header-anchor">#</a> 量词</h3> <div class="language- extra-class"><pre class="language-text"><code>  n+		匹配任何包含至少一个 n 的字符串。
  n*		匹配任何包含零个或多个 n 的字符串。
  n?		匹配任何包含零个或一个 n 的字符串。
  n{X}	匹配包含 X 个 n 的序列的字符串。
  n{X,}	X 是一个正整数。前面的模式 n 连续出现至少 X 次时匹配。
  n{X,Y}	X 和 Y 为正整数。前面的模式 n 连续出现至少 X 次，至多 Y 次时匹配。
  n$		匹配任何结尾为 n 的字符串。
  ^n		匹配任何开头为 n 的字符串。
  ?=n		匹配任何其后紧接指定字符串 n 的字符串。
  ?!n		匹配任何其后没有紧接指定字符串 n 的字符串。
</code></pre></div><p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ha(?=owa)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'hahahawohaowahaha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// [&quot;ha&quot;, index: 8, input: &quot;hahahawohaowahaha&quot;, groups: undefined]</span>
  <span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span>owa<span class="token punctuation">)</span>ha<span class="token operator">/</span>g<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'hahahawohaowahaha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// null</span>
</code></pre></div><h3 id="捕获组-非捕获组"><a href="#捕获组-非捕获组" class="header-anchor">#</a> 捕获组 &amp; 非捕获组</h3> <p>捕获组就是把正则表达式中子表达式匹配的内容，保存到内存中以数字编号或显式命名的组里，方便后面引用，组的编号方式以深度优先开始编号，捕获组使用**( )**进行捕获：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((\d{2})a)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'789b83a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [&quot;83a&quot;, &quot;83a&quot;, &quot;83&quot;, index: 4, input: &quot;789b83a&quot;, groups: undefined]</span>
<span class="token comment">// 可知 组0：&quot;83a&quot;	组1：&quot;83&quot;</span>

<span class="token operator">/</span>om\<span class="token function">s</span><span class="token punctuation">(</span><span class="token parameter">Lisa<span class="token operator">|</span>Reky</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span>g<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'om LisaReky'</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;om LisaReky&quot;, &quot;Reky&quot;, index: 0, input: &quot;om LisaReky&quot;, groups: undefined]</span>
</code></pre></div><p>非捕获组则是参与匹配但不捕获：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">om\s(?:Lisa|Reky){2}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'om LisaReky'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [&quot;om LisaReky&quot;, index: 0, input: &quot;om LisaReky&quot;, groups: undefined]</span>
</code></pre></div><h3 id="引用"><a href="#引用" class="header-anchor">#</a> 引用</h3> <ul><li><p>外部引用</p> <p>可使用 <code>$x</code> 取得组的引用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'爸爸打儿子'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(.+)打(.+)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'$2打$1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// '儿子打爸爸'</span>
</code></pre></div><p>上述$1表示捕获的第一个组，$2表示捕获的第二个组。</p></li> <li><p>反向引用</p> <p>捕获组捕获到的内容，不仅可以在正则表达式外部通过程序进行引用，也可以在正则表达式内部用 <strong>\x</strong> 进行引用，这种引用方式就是反向引用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'爸爸打爸爸吗'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(.+)打\1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [&quot;爸爸打爸爸&quot;]</span>
</code></pre></div></li></ul> <h3 id="贪婪与非贪婪模式"><a href="#贪婪与非贪婪模式" class="header-anchor">#</a> 贪婪与非贪婪模式</h3> <p>默认情况下捕获为贪婪模式，即最大程度匹配待匹配的表达式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(.+)b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'aaaaabbbb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [&quot;aaaaabbbb&quot;, &quot;aaaaabbb&quot;, index: 0, input: &quot;aaaaabbbb&quot;, groups: undefined]</span>
</code></pre></div><p>因此，可以使用 <strong>?</strong> 转变为非贪婪模式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(.+?)b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'aaaaabbbb'</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;aaaaab&quot;, &quot;aaaaa&quot;, index: 0, input: &quot;aaaaabbbb&quot;, groups: undefined]</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/core/js/es6/" class="prev">
        ES6特性
      </a></span> <span class="next"><a href="/development/build/webpack/">
        Webpack原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.47ef6698.js" defer></script><script src="/assets/js/2.6d8ae55b.js" defer></script><script src="/assets/js/17.65bdf248.js" defer></script>
  </body>
</html>
